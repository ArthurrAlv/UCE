<% include('../layouts/header') %>
<main>
  <h1>Carrinho de Compras</h1>
  <ul>
    <% if (carrinho && carrinho.length > 0) { %>
      <% carrinho.forEach(produto => { %>
        <li>
          <h3><%= produto.nome %></h3>
          <p>
            Preço: R$ 
            <%= 
              typeof produto.preco === 'number' && !isNaN(produto.preco) 
              ? produto.preco.toFixed(2).replace('.', ',') 
              : 'Preço Indisponível' 
            %>
          </p>
          <form action="/cliente/atualizarQuantidade/<%= produto.id %>" method="post">
            <input type="number" name="quantidade" value="<%= produto.quantidade %>" min="1">
            <button type="submit">Atualizar</button>
          </form>
          <a href="/cliente/removerProduto/<%= produto.id %>">Remover</a>
        </li>
      <% }) %>
    <% } else { %>
      <p>Seu carrinho está vazio.</p>
    <% } %>
  </ul>
  <a href="/produtos/listar">Continuar Comprando</a>
</main>
<% include('../layouts/footer') %>
